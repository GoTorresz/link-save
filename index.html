<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Para el amor de mi vida ‚ù§Ô∏è</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  height: 100vh;
  font-family: 'Segoe UI', Tahoma, sans-serif;
  background: linear-gradient(135deg, #ff5f6d, #ffc371);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  color: #fff;
}

.card {
  background: rgba(0,0,0,0.35);
  padding: 16px;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.3);
  width: 95%;
  max-width: 700px;
  height: 90vh;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  text-align: center;
  position: relative;
  z-index: 5;
}

h1 {
  margin: 0;
  font-size: clamp(1.5rem, 4vw, 2.2rem);
}

p {
  font-size: clamp(0.95rem, 2.5vw, 1.1rem);
  line-height: 1.4;
  margin: 8px 0;
}

.inicio-btn {
  margin: 10px auto;
  padding: 12px 25px;
  border: none;
  border-radius: 30px;
  background: #ff2d55;
  color: white;
  font-size: 1rem;
  cursor: pointer;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.historia {
  display: none;
  flex: 1;
  flex-direction: column;
  justify-content: space-between;
  position: relative;
}

.foto-container {
  width: 100%;
  flex: 1;
  max-height: 45vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  border-radius: 15px;
  background: rgba(0,0,0,0.15);
  margin: 10px 0;
  z-index: 5;
  touch-action: pan-y;
}

.foto-container img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.4);
  transition: opacity 0.5s ease, transform 0.5s ease;
}

.mensaje {
  font-size: clamp(0.95rem, 2.5vw, 1.1rem);
  min-height: 60px;
  padding: 5px;
}

/* Bot√≥n lateral */
.btn-siguiente {
  position: fixed;
  right: 20px;
  top: 50%;
  transform: translateY(-50%);
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: none;
  background: radial-gradient(circle at top left, #ff7a8a, #ff2d55);
  color: white;
  font-size: 24px;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(0,0,0,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
}

/* Bot√≥n de m√∫sica */
.music-btn {
  position: fixed;
  top: 20px;
  right: 20px;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  border: none;
  background: rgba(255, 45, 85, 0.9);
  color: white;
  font-size: 24px;
  cursor: pointer;
  z-index: 100;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  transition: transform 0.2s ease;
}

.music-btn:hover {
  transform: scale(1.1);
}

.music-btn:active {
  transform: scale(0.95);
}

/* Corazones y TE AMO */
.heart, .love-text {
  position: absolute;
  bottom: -20px;
  animation: floatUp linear forwards;
  opacity: 0.9;
  z-index: 1;
  pointer-events: none;
}

.heart { font-size: 20px; }
.love-text { font-size: 16px; font-weight: bold; text-shadow: 0 0 5px rgba(0,0,0,0.4); }

@keyframes floatUp {
  from { transform: translateY(0) scale(1); opacity: 1; }
  to { transform: translateY(-110vh) scale(1.3); opacity: 0; }
}
</style>
</head>

<body>

<!-- M√∫sica -->
<audio id="musica" src="musica.mp3" loop></audio>

<!-- Bot√≥n de m√∫sica -->
<button class="music-btn" id="musicBtn" onclick="toggleMusic()">üîá</button>

<div class="card">
  <div>
    <h1>FELIZ DIA DEL AMOR... AL AMOR DE MI VIDA‚ù§Ô∏è</h1>
    <p>
      üíñQue el mundo y yo te queremos de veras, pero yo siempre un poquito m√°s que el mundoüíñ
    </p>
  </div>

  <button class="inicio-btn" id="btnInicio" onclick="iniciarHistoria()">Ver nuestra historia üíï</button>

  <div id="historia" class="historia">
    <div class="foto-container" id="fotoContainer">
      <img id="fotoActual" src="" alt="Nuestra historia">
    </div>
    <div id="mensaje" class="mensaje"></div>

    <button class="btn-siguiente" onclick="siguiente()">‚û§‚ù§Ô∏è</button>
  </div>
</div>

<script>
const historia = [
  { foto: "foto1.jpg", texto: "Me gustar√≠a mirar todo de lejos, pero contigo.‚ù§Ô∏è" },
  { foto: "foto2.jpg", texto: "Su presencia en mi vida es un regalo que nunca dejar√© de apreciar. üíï" },
  { foto: "foto3.jpg", texto: "De todas aquellas manos, la suya era la √∫nica que me transmit√≠a la vida ‚ú®" },
  { foto: "foto4.jpg", texto: "Y para estar total, completa, absolutamente enamorado, hay que tener plena conciencia de que uno tambi√©n es querido, que uno tambi√©n inspira amor.‚ù§Ô∏è" },
  { foto: "foto5.jpg", texto: "Contigo no tengo necesidad de vivir a la defensiva. Me siento feliz.üíñ" },
  { foto: "foto6.jpg", texto: "üíñF√≠jese que cuando sonr√≠e se le forman unas comillas en cada extremo de su boca. Esa, su boca, es mi cita favorita.üíï" },
  { foto: "foto7.jpg", texto: "‚ù§Ô∏èTe amo como para escuchar tu risa toda la noche y dormir en tu pecho, sin sombras ni fantasmas. Te amo como para no soltarte jam√°s.‚ù§Ô∏è" },
  { foto: "foto8.jpg", texto: "Y aunque no siempre he entendido mis culpas y mis fracasos, en cambio, s√© que en tus brazos el mundo tiene sentido. ‚ù§Ô∏è" },
  { foto: "foto9.jpg", texto: "Todos necesitamos alguna vez una c√≥mplice, alguien que nos ayude a usar el coraz√≥n.üíû" },
  { foto: "foto10.jpg", texto: "Est√°bamos, estamos, estaremos juntos. A pedazos, a ratos, a p√°rpados, a sue√±os.‚ù§Ô∏è" }
];

let indice = 0;

function iniciarHistoria() {
  document.getElementById("btnInicio").style.display = "none";
  document.getElementById("historia").style.display = "flex";
  mostrar();

  // Intentar iniciar m√∫sica
  const musica = document.getElementById("musica");
  const btn = document.getElementById("musicBtn");
  musica.volume = 0.5;
  musica.play().then(() => {
    btn.innerText = "üîä";
  }).catch(err => {
    console.log("M√∫sica bloqueada, usa el bot√≥n para activarla");
    btn.innerText = "üîá";
  });
}

function toggleMusic() {
  const musica = document.getElementById("musica");
  const btn = document.getElementById("musicBtn");
  
  if (musica.paused) {
    musica.volume = 0.5;
    musica.play().then(() => {
      btn.innerText = "üîä";
    }).catch(err => {
      alert("No se pudo reproducir la m√∫sica. Verifica que el archivo musica.mp3 exista.");
    });
  } else {
    musica.pause();
    btn.innerText = "üîá";
  }
}

function mostrar() {
  const img = document.getElementById("fotoActual");
  img.style.opacity = 0;
  img.style.transform = "scale(0.95)";
  
  setTimeout(() => {
    let fotoPath = historia[indice].foto;
    
    // Intentar cargar la imagen
    img.onerror = function() {
      // Si falla con .jpg, intentar con .jpeg
      if (fotoPath.endsWith('.jpg')) {
        img.src = fotoPath.replace('.jpg', '.jpeg');
      } 
      // Si falla con .jpeg, intentar con .jpg
      else if (fotoPath.endsWith('.jpeg')) {
        img.src = fotoPath.replace('.jpeg', '.jpg');
      }
      // Si falla con ambas, intentar con .png
      else {
        img.src = fotoPath.replace(/\.(jpg|jpeg)$/, '.png');
      }
    };
    
    img.src = fotoPath;
    document.getElementById("mensaje").innerText = historia[indice].texto;
    img.style.opacity = 1;
    img.style.transform = "scale(1)";
  }, 200);
}

function siguiente() {
  indice++;
  if (indice >= historia.length) indice = 0;
  mostrar();
}

function anterior() {
  indice--;
  if (indice < 0) indice = historia.length - 1;
  mostrar();
}

/* Swipe en celular */
let startX = 0;
const container = document.getElementById("fotoContainer");

container.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
});

container.addEventListener("touchend", e => {
  const endX = e.changedTouches[0].clientX;
  const diff = endX - startX;

  if (Math.abs(diff) > 50) {
    if (diff < 0) siguiente();
    else anterior();
  }
});

/* Corazones */
setInterval(() => {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerText = "‚ù§Ô∏è";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.animationDuration = (4 + Math.random() * 3) + "s";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 7000);
}, 700);

/* TE AMO */
setInterval(() => {
  const text = document.createElement("div");
  text.className = "love-text";
  text.innerText = "TE AMO";
  text.style.left = Math.random() * 100 + "vw";
  text.style.animationDuration = (5 + Math.random() * 3) + "s";
  document.body.appendChild(text);
  setTimeout(() => text.remove(), 8000);
}, 2000);
</script>

</body>
</html>
